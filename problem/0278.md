# [278. 第一个错误的版本](https://leetcode.com/problems/first-bad-version)

🟢 <font color=#15bd66>Easy</font>&emsp; 🔖&ensp; [`二分查找`](/tag/binary-search.md) [`交互`](/tag/interactive.md)&emsp; 🔗&ensp;[`LeetCode`](https://leetcode.com/problems/first-bad-version)

## 题目

<p>你是产品经理，目前正在带领一个团队开发新的产品。不幸的是，你的产品的最新版本没有通过质量检测。由于每个版本都是基于之前的版本开发的，所以错误的版本之后的所有版本都是错的。</p>

<p>假设你有 <code>n</code> 个版本 <code>[1, 2, ..., n]</code>，你想找出导致之后所有版本出错的第一个错误的版本。</p>

<p>你可以通过调用&nbsp;<code>bool isBadVersion(version)</code>&nbsp;接口来判断版本号 <code>version</code> 是否在单元测试中出错。实现一个函数来查找第一个错误的版本。你应该尽量减少对调用 API 的次数。</p>
&nbsp;

<p><strong class="example">示例 1：</strong></p>

<pre>
<strong>输入：</strong>n = 5, bad = 4
<strong>输出：</strong>4
<strong>解释：</strong>
<code>调用 isBadVersion(3) -&gt; false 
调用 isBadVersion(5)&nbsp;-&gt; true 
调用 isBadVersion(4)&nbsp;-&gt; true</code>
<code>所以，4 是第一个错误的版本。</code>
</pre>

<p><strong class="example">示例 2：</strong></p>

<pre>
<strong>输入：</strong>n = 1, bad = 1
<strong>输出：</strong>1
</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul>
	<li><code>1 &lt;= bad &lt;= n &lt;= 2<sup>31</sup> - 1</code></li>
</ul>


## 解题思路

使用二分查找。

将左右边界分别初始化为 `1` 和 `n`，其中 `n` 是给定的版本数量。设定左右边界之后，每次都依据左右边界找到其中间的版本，检查其是否为正确版本。如果该版本为正确版本，那么第一个错误的版本必然位于该版本的右侧，缩紧左边界；否则第一个错误的版本必然位于该版本及该版本的左侧，缩紧右边界。

这样每判断一次都可以缩紧一次边界，而每次缩紧时两边界距离将变为原来的一半，因此至多只需要缩紧 `O(log ⁡n)` 次。

## 代码

```javascript
/**
 * @param {function} isBadVersion()
 * @return {function}
 */
var solution = function (isBadVersion) {
	/**
	 * @param {integer} n Total versions
	 * @return {integer} The first bad version
	 */
	return function (n) {
		let left = 1;
		let right = n;
		while (left <= right) {
			const mid = Math.floor((left + right) / 2);
			if (isBadVersion(mid)) {
				right = mid - 1;
			} else {
				left = mid + 1;
			}
		}
		return left;
	};
};
```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 34 | [在排序数组中查找元素的第一个和最后一个位置](https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array) | [[✓]](/problem/0034.md) |  [`数组`](/tag/array.md) [`二分查找`](/tag/binary-search.md) | <font color=#ffb800>Medium</font> |
| 35 | [搜索插入位置](https://leetcode.com/problems/search-insert-position) | [[✓]](/problem/0035.md) |  [`数组`](/tag/array.md) [`二分查找`](/tag/binary-search.md) | <font color=#15bd66>Easy</font> |
| 374 | [猜数字大小](https://leetcode.com/problems/guess-number-higher-or-lower) | [[✓]](/problem/0374.md) |  [`二分查找`](/tag/binary-search.md) [`交互`](/tag/interactive.md) | <font color=#15bd66>Easy</font> |
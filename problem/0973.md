# [973. 最接近原点的 K 个点](https://leetcode.com/problems/k-closest-points-to-origin)

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`几何`](/tag/geometry.md) [`数组`](/tag/array.md) [`数学`](/tag/math.md) [`分治`](/tag/divide-and-conquer.md) [`快速选择`](/tag/quickselect.md) [`排序`](/tag/sorting.md) [`堆（优先队列）`](/tag/heap-priority-queue.md)&emsp; 🔗&ensp;[`LeetCode`](https://leetcode.com/problems/k-closest-points-to-origin)

## 题目

<p>给定一个数组 <code>points</code>&nbsp;，其中&nbsp;<code>points[i] = [x<sub>i</sub>, y<sub>i</sub>]</code>&nbsp;表示 <strong>X-Y</strong> 平面上的一个点，并且是一个整数 <code>k</code> ，返回离原点 <code>(0,0)</code> 最近的 <code>k</code> 个点。</p>

<p>这里，平面上两点之间的距离是&nbsp;<strong>欧几里德距离</strong>（&nbsp;<code>√(x<sub>1</sub>&nbsp;- x<sub>2</sub>)<sup>2</sup>&nbsp;+ (y<sub>1</sub>&nbsp;- y<sub>2</sub>)<sup>2</sup></code>&nbsp;）。</p>

<p>你可以按 <strong>任何顺序</strong> 返回答案。除了点坐标的顺序之外，答案 <strong>确保</strong> 是 <strong>唯一</strong> 的。</p>

<p>&nbsp;</p>

<p><strong class="example">示例 1：</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2021/03/03/closestplane1.jpg" style="height: 400px; width: 400px;" /></p>

<pre>
<strong>输入：</strong>points = [[1,3],[-2,2]], k = 1
<strong>输出：</strong>[[-2,2]]
<strong>解释： </strong>
(1, 3) 和原点之间的距离为 sqrt(10)，
(-2, 2) 和原点之间的距离为 sqrt(8)，
由于 sqrt(8) &lt; sqrt(10)，(-2, 2) 离原点更近。
我们只需要距离原点最近的 K = 1 个点，所以答案就是 [[-2,2]]。
</pre>

<p><strong class="example">示例 2：</strong></p>

<pre>
<strong>输入：</strong>points = [[3,3],[5,-1],[-2,4]], k = 2
<strong>输出：</strong>[[3,3],[-2,4]]
（答案 [[-2,4],[3,3]] 也会被接受。）
</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul>
	<li><code>1 &lt;= k &lt;= points.length &lt;= 10<sup>4</sup></code></li>
	<li><code>-10<sup>4</sup>&nbsp;&lt; x<sub>i</sub>, y<sub>i</sub>&nbsp;&lt; 10<sup>4</sup></code></li>
</ul>


## 解题思路

这道题是 Top K 问题的变种，求的是最小的 `K` 个数，可以用大小为 `K` 的大顶堆来解决。

1. 遍历题目提供的 `points`，求出每个点到原点的距离 `dist`；
2. 将点和距离 `[point, dist]` 添加到大顶堆中，拿 `dist` 与堆顶的元素对比:
   - 如果比堆顶元素小，就把堆顶元素删除，并且将这个元素插入到堆中；
   - 如果比堆顶元素大，则不做处理；
3. 遍历完之后，返回大顶堆中的 `K` 个点。

## 代码

```javascript
/**
 * @param {number[][]} points
 * @param {number} k
 * @return {number[][]}
 */
var kClosest = function (points, k) {
	let heap = [];
	const add = ([point, dist]) => {
		if (heap.length < k) {
			heap.push([point, dist]);
			heapifyUp(heap.length - 1);
		} else if (heap[0][1] > dist) {
			heap[0] = [point, dist];
			heapifyDown(0);
		}
	};
	const heapifyUp = (i) => {
		while (i) {
			const parent = Math.floor((i - 1) / 2);
			if (heap[i][1] > heap[parent][1]) {
				[heap[i], heap[parent]] = [heap[parent], heap[i]];
				i = parent;
			} else {
				break;
			}
		}
	};
	const heapifyDown = (i) => {
		const left = i * 2 + 1;
		const right = i * 2 + 2;
		let max = i;
		if (left < heap.length && heap[left][1] > heap[max][1]) {
			max = left;
		}
		if (right < heap.length && heap[right][1] > heap[max][1]) {
			max = right;
		}
		if (max !== i) {
			[heap[i], heap[max]] = [heap[max], heap[i]];
			heapifyDown(max);
		}
	};
	for (let point of points) {
		const dist = point[0] * point[0] + point[1] * point[1];
		add([point, dist]);
	}
	return heap.map((item) => item[0]);
};
```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 215 | [数组中的第K个最大元素](https://leetcode.com/problems/kth-largest-element-in-an-array) | [[✓]](/problem/0215.md) |  [`数组`](/tag/array.md) [`分治`](/tag/divide-and-conquer.md) [`快速选择`](/tag/quickselect.md) `2+` | <font color=#ffb800>Medium</font> |
| 347 | [前 K 个高频元素](https://leetcode.com/problems/top-k-frequent-elements) | [[✓]](/problem/0347.md) |  [`数组`](/tag/array.md) [`哈希表`](/tag/hash-table.md) [`分治`](/tag/divide-and-conquer.md) `5+` | <font color=#ffb800>Medium</font> |
| 692 | [前K个高频单词](https://leetcode.com/problems/top-k-frequent-words) |  |  [`字典树`](/tag/trie.md) [`哈希表`](/tag/hash-table.md) [`字符串`](/tag/string.md) `4+` | <font color=#ffb800>Medium</font> |
| 1779 | [找到最近的有相同 X 或 Y 坐标的点](https://leetcode.com/problems/find-nearest-point-that-has-the-same-x-or-y-coordinate) |  |  [`数组`](/tag/array.md) | <font color=#15bd66>Easy</font> |
| 3111 | [覆盖所有点的最少矩形数目](https://leetcode.com/problems/minimum-rectangles-to-cover-points) |  |  [`贪心`](/tag/greedy.md) [`数组`](/tag/array.md) [`排序`](/tag/sorting.md) | <font color=#ffb800>Medium</font> |
| 3275 | [第 K 近障碍物查询](https://leetcode.com/problems/k-th-nearest-obstacle-queries) |  |  [`数组`](/tag/array.md) [`堆（优先队列）`](/tag/heap-priority-queue.md) | <font color=#ffb800>Medium</font> |
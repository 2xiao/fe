# [1190. 反转每对括号间的子串](https://leetcode.com/problems/reverse-substrings-between-each-pair-of-parentheses)

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`栈`](/tag/stack.md) [`字符串`](/tag/string.md)&emsp; 🔗&ensp;[`LeetCode`](https://leetcode.com/problems/reverse-substrings-between-each-pair-of-parentheses)

## 题目

<p>给出一个字符串&nbsp;<code>s</code>（仅含有小写英文字母和括号）。</p>

<p>请你按照从括号内到外的顺序，逐层反转每对匹配括号中的字符串，并返回最终的结果。</p>

<p>注意，您的结果中 <strong>不应</strong> 包含任何括号。</p>

<p>&nbsp;</p>

<p><strong>示例 1：</strong></p>

<pre>
<strong>输入：</strong>s = "(abcd)"
<strong>输出：</strong>"dcba"
</pre>

<p><strong>示例 2：</strong></p>

<pre>
<strong>输入：</strong>s = "(u(love)i)"
<strong>输出：</strong>"iloveu"
<strong>解释：</strong>先反转子字符串 "love" ，然后反转整个字符串。</pre>

<p><strong>示例 3：</strong></p>

<pre>
<strong>输入：</strong>s = "(ed(et(oc))el)"
<strong>输出：</strong>"leetcode"
<strong>解释：</strong>先反转子字符串 "oc" ，接着反转 "etco" ，然后反转整个字符串。</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul>
	<li><code>1 &lt;= s.length &lt;= 2000</code></li>
	<li><code>s</code> 中只有小写英文字母和括号</li>
	<li>题目测试用例确保所有括号都是成对出现的</li>
</ul>


## 解题思路

对于括号序列相关的题目，通用的解法是使用递归或栈。本题中使用栈解决。

从左到右遍历该字符串，使用字符串 `str` 记录当前层所遍历到的小写英文字母。对于当前遍历的字符：

- 如果是左括号，将 `str` 插入到栈中，并将 `str` 置为空，进入下一层；
- 如果是右括号，则说明遍历完了当前层，需要将 `str` 反转，返回给上一层。具体地，将栈顶字符串弹出，然后将反转后的 `str` 拼接到栈顶字符串末尾，将结果赋值给 `str`。
- 如果是小写英文字母，将其加到 `str` 末尾。

仅在遇到右括号时才进行字符串处理，这样可以保证是按照从括号内到外的顺序处理字符串。

## 代码

```javascript
/**
 * @param {string} s
 * @return {string}
 */
var reverseParentheses = function (s) {
	let stack = [];
	let str = '';
	for (let i = 0; i < s.length; i++) {
		if (s[i] === '(') {
			stack.push(str);
			str = '';
		} else if (s[i] === ')') {
			str = stack.pop() + str.split('').reverse().join('');
		} else {
			str += s[i];
		}
	}
	return str;
};
```

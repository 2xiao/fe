# [379. 电话目录管理系统](https://leetcode.com/problems/design-phone-directory)

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`设计`](/tag/design.md) [`队列`](/tag/queue.md) [`数组`](/tag/array.md) [`哈希表`](/tag/hash-table.md) [`链表`](/tag/linked-list.md)&emsp; 🔗&ensp;[`LeetCode`](https://leetcode.com/problems/design-phone-directory)

## 题目

<p>设计一个电话目录管理系统，一开始有&nbsp;<code>maxNumbers</code>&nbsp;个位置能够储存号码。系统应该存储号码，检查某个位置是否为空，并清空给定的位置。</p>

<p>实现&nbsp;<code>PhoneDirectory</code>&nbsp;类：</p>

<ul>
	<li><code>PhoneDirectory(int maxNumbers)</code>&nbsp;电话目录初始有 <code>maxNumbers</code> 个可用位置。</li>
	<li><code>int get()</code> 提供一个未分配给任何人的号码。如果没有可用号码则返回&nbsp;<code>-1</code>。</li>
	<li><code>bool check(int number)</code>&nbsp;如果位置&nbsp;<code>number</code>&nbsp;可用返回 <code>true</code>&nbsp;否则返回&nbsp;<code>false</code>。</li>
	<li><code>void release(int number)</code> 回收或释放位置&nbsp;<code>number</code>。</li>
</ul>

<p>&nbsp;</p>

<p><strong class="example">示例 1：</strong></p>

<pre>
<strong>输入：</strong>
["PhoneDirectory", "get", "get", "check", "get", "check", "release", "check"]
[[3], [], [], [2], [], [2], [2], [2]]
<strong>输出：</strong>
[null, 0, 1, true, 2, false, null, true]

<strong>解释：</strong>
PhoneDirectory phoneDirectory = new PhoneDirectory(3);
phoneDirectory.get();      // 它可以返回任意可用的数字。这里我们假设它返回 0。
phoneDirectory.get();      // 假设它返回 1。
phoneDirectory.check(2);   // 数字 2 可用，所以返回 true。
phoneDirectory.get();      // 返回剩下的唯一一个数字 2。
phoneDirectory.check(2);   // 数字 2 不再可用，所以返回 false。
phoneDirectory.release(2); // 将数字 2 释放回号码池。
phoneDirectory.check(2);   // 数字 2 重新可用，返回 true。
</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul>
	<li><code>1 &lt;= maxNumbers &lt;= 10<sup>4</sup></code></li>
	<li><code>0 &lt;= number &lt; maxNumbers</code></li>
	<li><code>get</code>，<code>check</code>&nbsp;和&nbsp;<code>release</code>&nbsp;最多被调用&nbsp;<code>2 * 10<sup>4</sup></code>&nbsp;次。</li>
</ul>

## 解题思路

这个问题可以通过维护一个可用号码集合和已使用号码集合来实现，可以使用两个数据结构：

1. 一个 `Set` 存储可用的号码，初始时包含所有可能的号码。
2. 一个 `Set` 存储已经被使用的号码，初始时为空。

通过两个 `Set` 来分别管理可用和已使用的号码，实现了分配、检查和释放号码的功能。

## 代码

```javascript
class PhoneDirectory {
	constructor(maxNumbers) {
		this.available = new Set();
		this.used = new Set();
		for (let i = 0; i < maxNumbers; i++) {
			this.available.add(i);
		}
	}
	get() {
		if (this.available.size == 0) return -1;
		const num = this.available.values().next().value;
		this.available.delete(num);
		this.used.add(num);
		return num;
	}
	check(number) {
		return !this.used.has(number);
	}
	release(number) {
		if (this.used.has(number)) {
			this.used.delete(number);
			this.available.add(number);
		}
	}
}
```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 1845 | [座位预约管理系统](https://leetcode.com/problems/seat-reservation-manager) |  |  [`设计`](/tag/design.md) [`堆（优先队列）`](/tag/heap-priority-queue.md) | <font color=#ffb800>Medium</font> |
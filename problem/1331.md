# [1331. 数组序号转换](https://leetcode.com/problems/rank-transform-of-an-array)

🟢 <font color=#15bd66>Easy</font>&emsp; 🔖&ensp; [`数组`](/tag/array.md) [`哈希表`](/tag/hash-table.md) [`排序`](/tag/sorting.md)&emsp; 🔗&ensp;[`LeetCode`](https://leetcode.com/problems/rank-transform-of-an-array)

## 题目

<p>给你一个整数数组&nbsp;<code>arr</code> ，请你将数组中的每个元素替换为它们排序后的序号。</p>

<p>序号代表了一个元素有多大。序号编号的规则如下：</p>

<ul>
	<li>序号从 1 开始编号。</li>
	<li>一个元素越大，那么序号越大。如果两个元素相等，那么它们的序号相同。</li>
	<li>每个数字的序号都应该尽可能地小。</li>
</ul>

<p>&nbsp;</p>

<p><strong>示例 1：</strong></p>

<pre><strong>输入：</strong>arr = [40,10,20,30]
<strong>输出：</strong>[4,1,2,3]
<strong>解释：</strong>40 是最大的元素。 10 是最小的元素。 20 是第二小的数字。 30 是第三小的数字。</pre>

<p><strong>示例 2：</strong></p>

<pre><strong>输入：</strong>arr = [100,100,100]
<strong>输出：</strong>[1,1,1]
<strong>解释：</strong>所有元素有相同的序号。
</pre>

<p><strong>示例 3：</strong></p>

<pre><strong>输入：</strong>arr = [37,12,28,9,100,56,80,5,12]
<strong>输出：</strong>[5,3,4,2,8,6,7,1,3]
</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul>
	<li><code>0 &lt;= arr.length &lt;= 10<sup>5</sup></code></li>
	<li><code>-10<sup>9</sup>&nbsp;&lt;= arr[i] &lt;= 10<sup>9</sup></code></li>
</ul>


## 解题思路

1. 对数组的副本进行去重，并从小到大排序
2. 使用一个哈希表存储排序后数组中每个数字的排序
3. 再次遍历原数组，在哈希表中查找出排序后返回

#### 复杂度分析

- **时间复杂度**：`O(n log n)`，排序的时间复杂度是 `O(n log n)`。
- **空间复杂度**：`O(n)`，用于存储哈希表和排序后的数组副本。

## 代码

```javascript
/**
 * @param {number[]} arr
 * @return {number[]}
 */
var arrayRankTransform = function (arr) {
	const sorted = [...new Set(arr)].sort((a, b) => a - b);

	let map = new Map();
	for (let i = 0; i < sorted.length; i++) {
		map.set(sorted[i], i + 1);
	}

	return arr.map((i) => map.get(i));
};
```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 1632 | [矩阵转换后的秩](https://leetcode.com/problems/rank-transform-of-a-matrix) |  |  [`并查集`](/tag/union-find.md) [`图`](/tag/graph.md) [`拓扑排序`](/tag/topological-sort.md) `3+` | <font color=#ff334b>Hard</font> |
| 2089 | [找出数组排序后的目标下标](https://leetcode.com/problems/find-target-indices-after-sorting-array) |  |  [`数组`](/tag/array.md) [`二分查找`](/tag/binary-search.md) [`排序`](/tag/sorting.md) | <font color=#15bd66>Easy</font> |
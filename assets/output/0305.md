---
title: 305. 岛屿数量 II 🔒
description: LeetCode,305. 岛屿数量 II 🔒,岛屿数量 II,Number of Islands II,解题思路,并查集,数组,哈希表
keywords:
  - LeetCode
  - 305. 岛屿数量 II 🔒
  - 岛屿数量 II
  - Number of Islands II
  - 解题思路
  - 并查集
  - 数组
  - 哈希表
---

# 305. 岛屿数量 II 🔒

🔴 <font color=#ff334b>Hard</font>&emsp; 🔖&ensp; [`并查集`](/tag/union-find.md) [`数组`](/tag/array.md) [`哈希表`](/tag/hash-table.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/number-of-islands-ii) [`LeetCode`](https://leetcode.com/problems/number-of-islands-ii)

## 题目

You are given an empty 2D binary grid `grid` of size `m x n`. The grid
represents a map where `0`'s represent water and `1`'s represent land.
Initially, all the cells of `grid` are water cells (i.e., all the cells are
`0`'s).

We may perform an add land operation which turns the water at position into a
land. You are given an array `positions` where `positions[i] = [ri, ci]` is
the position `(ri, ci)` at which we should operate the `ith` operation.

Return _an array of integers_ `answer` _where_ `answer[i]` _is the number of
islands after turning the cell_ `(ri, ci)` _into a land_.

An **island** is surrounded by water and is formed by connecting adjacent
lands horizontally or vertically. You may assume all four edges of the grid
are all surrounded by water.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0305.Number%20of%20Islands%20II/images/tmp-
grid.jpg)

> Input: m = 3, n = 3, positions = [[0,0],[0,1],[1,2],[2,1]]
> 
> Output: [1,1,2,3]
> 
> Explanation:
> 
> Initially, the 2d grid is filled with water.
> - Operation #1: addLand(0, 0) turns the water at grid[0][0] into a land. We have 1 island.
> - Operation #2: addLand(0, 1) turns the water at grid[0][1] into a land. We still have 1 island.
> - Operation #3: addLand(1, 2) turns the water at grid[1][2] into a land. We have 2 islands.
> - Operation #4: addLand(2, 1) turns the water at grid[2][1] into a land. We have 3 islands.

**Example 2:**

> Input: m = 1, n = 1, positions = [[0,0]]
> 
> Output: [1]

**Constraints:**

  * `1 <= m, n, positions.length <= 10^4`
  * `1 <= m * n <= 10^4`
  * `positions[i].length == 2`
  * `0 <= ri < m`
  * `0 <= ci < n`



**Follow up:** Could you solve it in time complexity `O(k log(mn))`, where `k
== positions.length`?


## 题目大意

给你一个大小为 `m x n` 的二维二进制网格 `grid` 。网格表示一个地图，其中，`0` 表示水，`1` 表示陆地。最初，`grid`
中的所有单元格都是水单元格（即，所有单元格都是 `0`）。

可以通过执行 `addLand` 操作，将某个位置的水转换成陆地。给你一个数组 `positions` ，其中 `positions[i] = [ri,
ci]` 是要执行第 `i` 次操作的位置 `(ri, ci)` 。

返回一个整数数组 `answer` ，其中 `answer[i]` 是将单元格 `(ri, ci)` 转换为陆地后，地图中岛屿的数量。

**岛屿** 的定义是被「水」包围的「陆地」，通过水平方向或者垂直方向上相邻的陆地连接而成。你可以假设地图网格的四边均被无边无际的「水」所包围。



**示例 1：**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0305.Number%20of%20Islands%20II/images/tmp-
grid.jpg)

> 
> 
> 
> 
> 
> **输入：** m = 3, n = 3, positions = [[0,0],[0,1],[1,2],[2,1]]
> 
> **输出：**[1,1,2,3]
> 
> **解释：**
> 
> 起初，二维网格 grid 被全部注入「水」。（0 代表「水」，1 代表「陆地」）
> - 操作 #1：addLand(0, 0) 将 grid[0][0] 的水变为陆地。此时存在 1 个岛屿。
> - 操作 #2：addLand(0, 1) 将 grid[0][1] 的水变为陆地。此时存在 1 个岛屿。
> - 操作 #3：addLand(1, 2) 将 grid[1][2] 的水变为陆地。此时存在 2 个岛屿。
> - 操作 #4：addLand(2, 1) 将 grid[2][1] 的水变为陆地。此时存在 3 个岛屿。
> 
> 

**示例 2：**

> 
> 
> 
> 
> 
> **输入：** m = 1, n = 1, positions = [[0,0]]
> 
> **输出：**[1]
> 
> 



**提示：**

  * `1 <= m, n, positions.length <= 10^4`
  * `1 <= m * n <= 10^4`
  * `positions[i].length == 2`
  * `0 <= ri < m`
  * `0 <= ci < n`



**进阶：** 你可以设计一个时间复杂度 `O(k log(mn))` 的算法解决此问题吗？（其中 `k == positions.length`）


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 200 | [岛屿数量](https://leetcode.com/problems/number-of-islands) | [[✓]](/problem/0200.md) |  [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) [`并查集`](/tag/union-find.md) `2+` | <font color=#ffb800>Medium</font> |
| 2076 | [处理含限制条件的好友请求](https://leetcode.com/problems/process-restricted-friend-requests) |  |  [`并查集`](/tag/union-find.md) [`图`](/tag/graph.md) | <font color=#ff334b>Hard</font> |
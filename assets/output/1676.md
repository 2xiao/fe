# [1676. 二叉树的最近公共祖先 IV 🔒](https://2xiao.github.io/leetcode-js/problem/1676.html)

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`树`](/tag/tree.md) [`深度优先搜索`](/tag/depth-first-search.md) [`哈希表`](/tag/hash-table.md) [`二叉树`](/tag/binary-tree.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-iv) [`LeetCode`](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iv)

## 题目

Given the `root` of a binary tree and an array of `TreeNode` objects `nodes`,
return _the lowest common ancestor (LCA) of**all the nodes** in _`nodes`. All
the nodes will exist in the tree, and all values of the tree's nodes are
**unique**.

Extending the **[definition of LCA on
Wikipedia](https://en.wikipedia.org/wiki/Lowest_common_ancestor)** : "The
lowest common ancestor of `n` nodes `p1`, `p2`, ..., `pn` in a binary tree `T`
is the lowest node that has every `pi` as a **descendant** (where we allow **a
node to be a descendant of itself**) for every valid `i`". A **descendant** of
a node `x` is a node `y` that is on the path from node `x` to some leaf node.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1676.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20IV/images/binarytree.png)

> Input: root = [3,5,1,6,2,0,8,null,null,7,4], nodes = [4,7]
> 
> Output: 2
> 
> Explanation: The lowest common ancestor of nodes 4 and 7 is node 2.

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1676.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20IV/images/binarytree.png)

> Input: root = [3,5,1,6,2,0,8,null,null,7,4], nodes = [1]
> 
> Output: 1
> 
> Explanation: The lowest common ancestor of a single node is the node itself.
> 
> 

**Example 3:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1676.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20IV/images/binarytree.png)

> Input: root = [3,5,1,6,2,0,8,null,null,7,4], nodes = [7,6,2,4]
> 
> Output: 5
> 
> Explanation: The lowest common ancestor of the nodes 7, 6, 2, and 4 is node 5.

**Constraints:**

  * The number of nodes in the tree is in the range `[1, 104]`.
  * `-10^9 <= Node.val <= 10^9`
  * All `Node.val` are **unique**.
  * All `nodes[i]` will exist in the tree.
  * All `nodes[i]` are distinct.


## 题目大意

给定一棵二叉树的根节点 `root` 和 `TreeNode` 类对象的数组（列表） `nodes`，返回 __`nodes`
中所有节点的最近公共祖先（LCA）。数组（列表）中所有节点都存在于该二叉树中，且二叉树中所有节点的值都是互不相同的。

我们扩展[二叉树的最近公共祖先节点在维基百科上的定义](https://en.wikipedia.org/wiki/Lowest_common_ancestor)：“对于任意合理的
`i` 值， `n` 个节点 `p1` 、 `p2`、...、 `pn` 在二叉树 `T` 中的最近公共祖先节点是**后代** 中包含所有节点 `pi`
的最深节点（我们允许一个节点是其自身的后代）”。一个节点 `x` 的后代节点是节点 `x` 到某一叶节点间的路径中的节点 `y`。

**示例 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1676.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20IV/images/binarytree.png)

> 
> 
> 
> 
> 
> **输入:** root = [3,5,1,6,2,0,8,null,null,7,4], nodes = [4,7]
> 
> **输出:** 2
> 
> **解释:** 节点 4 和 7 的最近公共祖先是 2。
> 
> 

**示例 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1676.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20IV/images/binarytree.png)

> 
> 
> 
> 
> 
> **输入:** root = [3,5,1,6,2,0,8,null,null,7,4], nodes = [1]
> 
> **输出:** 1
> 
> **解释:** 单个节点的最近公共祖先是该节点本身。
> 
> 
> 
> 

**示例 3:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1676.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20IV/images/binarytree.png)

> 
> 
> 
> 
> 
> **输入:** root = [3,5,1,6,2,0,8,null,null,7,4], nodes = [7,6,2,4]
> 
> **输出:** 5
> 
> **解释:** 节点 7、6、2 和 4 的最近公共祖先节点是 5。
> 
> 

**示例 4:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/1600-1699/1676.Lowest%20Common%20Ancestor%20of%20a%20Binary%20Tree%20IV/images/binarytree.png)

> 
> 
> 
> 
> 
> **输入:** root = [3,5,1,6,2,0,8,null,null,7,4], nodes = [0,1,2,3,4,5,6,7,8]
> 
> **输出:** 3
> 
> **解释:** 树中所有节点的最近公共祖先是根节点。
> 
> 

**提示:**

  * 树中节点个数的范围是 `[1, 104]` 。
  * `-10^9 <= Node.val <= 10^9`
  * 所有的 `Node.val` 都是**互不相同** 的。
  * 所有的 `nodes[i]` 都存在于该树中。
  * 所有的 `nodes[i]` 都是互不相同的。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 235 | [二叉搜索树的最近公共祖先](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree) | [[✓]](/problem/0235.md) |  [`树`](/tag/tree.md) [`深度优先搜索`](/tag/depth-first-search.md) [`二叉搜索树`](/tag/binary-search-tree.md) `1+` | <font color=#ffb800>Medium</font> |
| 236 | [二叉树的最近公共祖先](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree) | [[✓]](/problem/0236.md) |  [`树`](/tag/tree.md) [`深度优先搜索`](/tag/depth-first-search.md) [`二叉树`](/tag/binary-tree.md) | <font color=#ffb800>Medium</font> |
| 1123 | [最深叶节点的最近公共祖先](https://leetcode.com/problems/lowest-common-ancestor-of-deepest-leaves) |  |  [`树`](/tag/tree.md) [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) `2+` | <font color=#ffb800>Medium</font> |
| 1644 | [二叉树的最近公共祖先 II 🔒](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-ii) |  |  [`树`](/tag/tree.md) [`深度优先搜索`](/tag/depth-first-search.md) [`二叉树`](/tag/binary-tree.md) | <font color=#ffb800>Medium</font> |
| 1650 | [二叉树的最近公共祖先 III 🔒](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iii) |  |  [`树`](/tag/tree.md) [`哈希表`](/tag/hash-table.md) [`双指针`](/tag/two-pointers.md) `1+` | <font color=#ffb800>Medium</font> |
| 1676 | [二叉树的最近公共祖先 IV 🔒](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree-iv) |  |  [`树`](/tag/tree.md) [`深度优先搜索`](/tag/depth-first-search.md) [`哈希表`](/tag/hash-table.md) `1+` | <font color=#ffb800>Medium</font> |
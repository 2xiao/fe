# [505. 迷宫 II 🔒](https://2xiao.github.io/leetcode-js/problem/0505.html)

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) [`图`](/tag/graph.md) [`数组`](/tag/array.md) [`矩阵`](/tag/matrix.md) [`最短路`](/tag/shortest-path.md) [`堆（优先队列）`](/tag/heap-priority-queue.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/the-maze-ii) [`LeetCode`](https://leetcode.com/problems/the-maze-ii)

## 题目

There is a ball in a `maze` with empty spaces (represented as `0`) and walls
(represented as `1`). The ball can go through the empty spaces by rolling
**up, down, left or right** , but it won't stop rolling until hitting a wall.
When the ball stops, it could choose the next direction.

Given the `m x n` `maze`, the ball's `start` position and the `destination`,
where `start = [startrow, startcol]` and `destination = [destinationrow,
destinationcol]`, return _the shortest**distance** for the ball to stop at the
destination_. If the ball cannot stop at `destination`, return `-1`.

The **distance** is the number of **empty spaces** traveled by the ball from
the start position (excluded) to the destination (included).

You may assume that **the borders of the maze are all walls** (see examples).



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0505.The%20Maze%20II/images/maze1-1-grid.jpg)

> Input: maze = [[0,0,1,0,0],[0,0,0,0,0],[0,0,0,1,0],[1,1,0,1,1],[0,0,0,0,0]], start = [0,4], destination = [4,4]
> 
> Output: 12
> 
> Explanation: One possible way is : left -> down -> left -> down -> right -> down -> right.
> 
> The length of the path is 1 + 1 + 3 + 1 + 2 + 2 + 2 = 12.

**Example 2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0505.The%20Maze%20II/images/maze1-2-grid.jpg)

> Input: maze = [[0,0,1,0,0],[0,0,0,0,0],[0,0,0,1,0],[1,1,0,1,1],[0,0,0,0,0]], start = [0,4], destination = [3,2]
> 
> Output: -1
> 
> Explanation: There is no way for the ball to stop at the destination. Notice that you can pass through the destination but you cannot stop there.

**Example 3:**

> Input: maze = [[0,0,0,0,0],[1,1,0,0,1],[0,0,0,0,0],[0,1,0,0,1],[0,1,0,0,0]], start = [4,3], destination = [0,1]
> 
> Output: -1

**Constraints:**

  * `m == maze.length`
  * `n == maze[i].length`
  * `1 <= m, n <= 100`
  * `maze[i][j]` is `0` or `1`.
  * `start.length == 2`
  * `destination.length == 2`
  * `0 <= startrow, destinationrow < m`
  * `0 <= startcol, destinationcol < n`
  * Both the ball and the destination exist in an empty space, and they will not be in the same position initially.
  * The maze contains **at least 2 empty spaces**.


## 题目大意

**迷宫** 中有一个球，它有空地 (表示为 `0`) 和墙 (表示为 `1`)。球可以**向上** 、**向下** 、**向左** 或**向右**
滚过空地，但直到撞上墙之前它都不会停止滚动。当球停止时，它才可以选择下一个滚动方向。

给定 `m × n` 的**迷宫**(`maze`)，球的**起始位置  **(`start = [startrow, startcol]`) 和**目的地
**(`destination = [destinationrow, destinationcol]`)，返回球在**目的地
**(`destination`) 停止的最短**距离** 。如果球不能在**目的地  **(`destination`) 停止，返回 `-1`。

**距离** 是指球从起始位置 ( 不包括 ) 到终点 ( 包括 ) 所经过的**空地** 数。

你可以假设**迷宫的边界都是墙  **( 见例子 )。



**示例 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0505.The%20Maze%20II/images/maze1-1-grid.jpg)

> 
> 
> 
> 
> 
> **输入:** maze = [[0,0,1,0,0],[0,0,0,0,0],[0,0,0,1,0],[1,1,0,1,1],[0,0,0,0,0]], start = [0,4], destination = [4,4]
> 
> **输出:** 12
> 
> **解析:** 一条最短路径 : left -> down -> left -> down -> right -> down -> right。
> 
> > 
> > 
> > 
>  总距离为 1 + 1 + 3 + 1 + 2 + 2 + 2 = 12。
> 
> 
> 
> 

**示例  2:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0500-0599/0505.The%20Maze%20II/images/maze1-2-grid.jpg)

> 
> 
> 
> 
> 
> **输入:** maze = [[0,0,1,0,0],[0,0,0,0,0],[0,0,0,1,0],[1,1,0,1,1],[0,0,0,0,0]], start = [0,4], destination = [3,2]
> 
> **输出:** -1
> 
> **解析:** 球不可能在目的地停下来。注意，你可以经过目的地，但不能在那里停下来。
> 
> 

**示例  3:**

> 
> 
> 
> 
> 
> **输入:** maze = [[0,0,0,0,0],[1,1,0,0,1],[0,0,0,0,0],[0,1,0,0,1],[0,1,0,0,0]], start = [4,3], destination = [0,1]
> 
> **输出:** -1
> 
> 



**注意:**

  * `m == maze.length`
  * `n == maze[i].length`
  * `1 <= m, n <= 100`
  * `maze[i][j]` 是 `0` 或 `1`.
  * `start.length == 2`
  * `destination.length == 2`
  * `0 <= startrow, destinationrow < m`
  * `0 <= startcol, destinationcol < n`
  * 球和目的地都存在于一个空地中，它们最初不会处于相同的位置。
  * 迷宫**至少包含两个空地** 。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 490 | [迷宫 🔒](https://leetcode.com/problems/the-maze) |  |  [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) [`数组`](/tag/array.md) `1+` | <font color=#ffb800>Medium</font> |
| 499 | [迷宫 III 🔒](https://leetcode.com/problems/the-maze-iii) |  |  [`深度优先搜索`](/tag/depth-first-search.md) [`广度优先搜索`](/tag/breadth-first-search.md) [`图`](/tag/graph.md) `5+` | <font color=#ff334b>Hard</font> |
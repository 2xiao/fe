---
title: 1709. 访问日期之间最大的空档期 🔒
description: LeetCode,1709. 访问日期之间最大的空档期 🔒,访问日期之间最大的空档期,Biggest Window Between Visits,解题思路,数据库
keywords:
  - LeetCode
  - 1709. 访问日期之间最大的空档期 🔒
  - 访问日期之间最大的空档期
  - Biggest Window Between Visits
  - 解题思路
  - 数据库
---

# 1709. 访问日期之间最大的空档期 🔒

🟠 <font color=#ffb800>Medium</font>&emsp; 🔖&ensp; [`数据库`](/tag/database.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/biggest-window-between-visits) [`LeetCode`](https://leetcode.com/problems/biggest-window-between-visits)

## 题目

Table: `UserVisits`

> 
> 
> 
> 
> 
> +-------------+------+
> 
> | Column Name | Type |
> 
> +-------------+------+
> 
> | user_id> 
>  | int  |
> 
> | visit_date  | date |
> 
> +-------------+------+
> 
> This table does not have a primary key, it might contain duplicate rows.
> 
> This table contains logs of the dates that users visited a certain retailer.
> 
> 



Assume today's date is `'2021-1-1'`.

Write a solution that will, for each `user_id`, find out the largest `window`
of days between each visit and the one right after it (or today if you are
considering the last visit).

Return the result table ordered by `user_id`.

The query result format is in the following example.



**Example 1:**

> Input: 
> 
> UserVisits table:
> 
> +---------+------------+
> 
> | user_id | visit_date |
> 
> +---------+------------+
> 
> | 1> 
>    | 2020-11-28 |
> 
> | 1> 
>    | 2020-10-20 |
> 
> | 1> 
>    | 2020-12-3  |
> 
> | 2> 
>    | 2020-10-5  |
> 
> | 2> 
>    | 2020-12-9  |
> 
> | 3> 
>    | 2020-11-11 |
> 
> +---------+------------+
> 
> Output: 
> 
> +---------+---------------+
> 
> | user_id | biggest_window|
> 
> +---------+---------------+
> 
> | 1> 
>    | 39> 
> > 
> > 
> |
> 
> | 2> 
>    | 65> 
> > 
> > 
> |
> 
> | 3> 
>    | 51> 
> > 
> > 
> |
> 
> +---------+---------------+
> 
> Explanation: 
> 
> For the first user, the windows in question are between dates:
> 
> > - 2020-10-20 and 2020-11-28 with a total of 39 days. 
> 
> > - 2020-11-28 and 2020-12-3 with a total of 5 days. 
> 
> > - 2020-12-3 and 2021-1-1 with a total of 29 days.
> 
> Making the biggest window the one with 39 days.
> 
> For the second user, the windows in question are between dates:
> 
> > - 2020-10-5 and 2020-12-9 with a total of 65 days.
> 
> > - 2020-12-9 and 2021-1-1 with a total of 23 days.
> 
> Making the biggest window the one with 65 days.
> 
> For the third user, the only window in question is between dates 2020-11-11 and 2021-1-1 with a total of 51 days.
> 
> 


## 题目大意

表： `UserVisits`

> 
> 
> 
> 
> 
> +-------------+------+
> 
> | Column Name | Type |
> 
> +-------------+------+
> 
> | user_id> 
>  | int  |
> 
> | visit_date  | date |
> 
> +-------------+------+
> 
> 该表没有主键，它可能有重复的行
> 
> 该表包含用户访问某特定零售商的日期日志。



假设今天的日期是 `'2021-1-1'` 。

编写解决方案，对于每个 `user_id` ，求出每次访问及其下一个访问（若该次访问是最后一次，则为今天）之间最大的空档期天数 `window` 。

返回结果表，按用户编号 `user_id` 排序。

结果格式如下示例所示：



**示例 1：**

> 
> 
> 
> 
> 
> **输入：**
> 
> UserVisits 表：
> 
> +---------+------------+
> 
> | user_id | visit_date |
> 
> +---------+------------+
> 
> | 1> 
>    | 2020-11-28 |
> 
> | 1> 
>    | 2020-10-20 |
> 
> | 1> 
>    | 2020-12-3  |
> 
> | 2> 
>    | 2020-10-5  |
> 
> | 2> 
>    | 2020-12-9  |
> 
> | 3> 
>    | 2020-11-11 |
> 
> +---------+------------+
> 
> **输出：**
> 
> +---------+---------------+
> 
> | user_id | biggest_window|
> 
> +---------+---------------+
> 
> | 1> 
>    | 39> 
> > 
> > 
> |
> 
> | 2> 
>    | 65> 
> > 
> > 
> |
> 
> | 3> 
>    | 51> 
> > 
> > 
> |
> 
> +---------+---------------+
> 
> **解释：**
> 
> 对于第一个用户，问题中的空档期在以下日期之间：
> 
> > - 2020-10-20 至 2020-11-28 ，共计 39 天。
> 
> > - 2020-11-28 至 2020-12-3 ，共计 5 天。
> 
> > - 2020-12-3 至 2021-1-1 ，共计 29 天。
> 
> 由此得出，最大的空档期为 39 天。
> 
> 对于第二个用户，问题中的空档期在以下日期之间：
> 
> > - 2020-10-5 至 2020-12-9 ，共计 65 天。
> 
> > - 2020-12-9 至 2021-1-1 ，共计 23 天。
> 
> 由此得出，最大的空档期为 65 天。
> 
> 对于第三个用户，问题中的唯一空档期在 2020-11-11 至 2021-1-1 之间，共计 51 天。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 2228 | [7 天内两次购买的用户 🔒](https://leetcode.com/problems/users-with-two-purchases-within-seven-days) |  |  [`数据库`](/tag/database.md) | <font color=#ffb800>Medium</font> |
---
title: 2230. 查找可享受优惠的用户 🔒
description: LeetCode,2230. 查找可享受优惠的用户 🔒,查找可享受优惠的用户,The Users That Are Eligible for Discount,解题思路,数据库
keywords:
  - LeetCode
  - 2230. 查找可享受优惠的用户 🔒
  - 查找可享受优惠的用户
  - The Users That Are Eligible for Discount
  - 解题思路
  - 数据库
---

# 2230. 查找可享受优惠的用户 🔒

🟢 <font color=#15bd66>Easy</font>&emsp; 🔖&ensp; [`数据库`](/tag/database.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/the-users-that-are-eligible-for-discount) [`LeetCode`](https://leetcode.com/problems/the-users-that-are-eligible-for-discount)

## 题目

Table: `Purchases`

> 
> 
> 
> 
> 
> +-------------+----------+
> 
> | Column Name | Type> 
>  |
> 
> +-------------+----------+
> 
> | user_id> 
>  | int> 
>   |
> 
> | time_stamp  | datetime |
> 
> | amount> 
>   | int> 
>   |
> 
> +-------------+----------+
> 
> (user_id, time_stamp) is the primary key (combination of columns with unique values) for this table.
> 
> Each row contains information about the purchase time and the amount paid for the user with ID user_id.
> 
> 



A user is eligible for a discount if they had a purchase in the inclusive
interval of time `[startDate, endDate]` with at least `minAmount` amount. To
convert the dates to times, both dates should be considered as the **start**
of the day (i.e., `endDate = 2022-03-05` should be considered as the time
`2022-03-05 00:00:00`).

Write a solution to report the IDs of the users that are eligible for a
discount.

Return the result table ordered by `user_id`.

The result format is in the following example.



**Example 1:**

> Input:
> 
> Purchases table:
> 
> +---------+---------------------+--------+
> 
> | user_id | time_stamp> 
> > 
>   | amount |
> 
> +---------+---------------------+--------+
> 
> | 1> 
>    | 2022-04-20 09:03:00 | 4416   |
> 
> | 2> 
>    | 2022-03-19 19:24:02 | 678> 
> |
> 
> | 3> 
>    | 2022-03-18 12:03:09 | 4523   |
> 
> | 3> 
>    | 2022-03-30 09:43:42 | 626> 
> |
> 
> +---------+---------------------+--------+
> 
> startDate = 2022-03-08, endDate = 2022-03-20, minAmount = 1000
> 
> Output:
> 
> +---------+
> 
> | user_id |
> 
> +---------+
> 
> | 3> 
>    |
> 
> +---------+
> 
> Explanation:
> 
> Out of the three users, only User 3 is eligible for a discount.
 > - User 1 had one purchase with at least minAmount amount, but not within the time interval.
 > - User 2 had one purchase within the time interval, but with less than minAmount amount.
 > - User 3 is the only user who had a purchase that satisfies both conditions.
> 
> 



**Important Note:** This problem is basically the same as [The Number of Users
That Are Eligible for Discount](https://leetcode.com/problems/the-number-of-
users-that-are-eligible-for-discount/).


## 题目大意

Table: `Purchases`

> 
> 
> 
> 
> 
> +-------------+----------+
> 
> | Column Name | Type> 
>  |
> 
> +-------------+----------+
> 
> | user_id> 
>  | int> 
>   |
> 
> | time_stamp  | datetime |
> 
> | amount> 
>   | int> 
>   |
> 
> +-------------+----------+
> 
> (user_id, time_stamp)是此表的主键（不同值的列的组合）。
> 
> 每一行都包含有关购买时间和用户 ID user_id 以及购买的数量的信息。
> 
> 

如果用户在包含时间间隔 `[startDate，endDate]` 内购买了至少 `minAmount`
数量的商品，则有资格享受折扣。要将日期转换为时间，两个日期都应视为一天的 **开始** （例如，`endDate = 2022-03-05` 应该被认为是
`2022-03-05 00:00:00`）。

编写一个解决方案来查询符合折扣条件的用户的 ID。

返回结果表，以 `user_id` 排序。

查询结果格式如下例所示。

**示例 1：**

> 
> 
> 
> 
> 
> **输入：**
> 
> Purchases 表：
> 
> +---------+---------------------+--------+
> 
> | user_id | time_stamp> 
> > 
>   | amount |
> 
> +---------+---------------------+--------+
> 
> | 1> 
>    | 2022-04-20 09:03:00 | 4416   |
> 
> | 2> 
>    | 2022-03-19 19:24:02 | 678> 
> |
> 
> | 3> 
>    | 2022-03-18 12:03:09 | 4523   |
> 
> | 3> 
>    | 2022-03-30 09:43:42 | 626> 
> |
> 
> +---------+---------------------+--------+
> 
> startDate = 2022-03-08, endDate = 2022-03-20, minAmount = 1000
> 
> **输出：**
> 
> +---------+
> 
> | user_id |
> 
> +---------+
> 
> | 3> 
>    |
> 
> +---------+
> 
> **解释：**
> 
> 在三个用户中，只有用户 3 有资格享受折扣。
> - 用户 1 有一次至少购买了 minAmount 的数量，但不在时间间隔内。
> - 用户 2 在时间间隔内有一次购买，但少于 minAmount 数量。
> - 用户 3 是唯一满足这两个条件的用户。
> 
> 

**重要提示：** 这个问题基本上与 [有资格享受折扣的用户数量](https://leetcode.cn/problems/the-number-of-
users-that-are-eligible-for-discount/description/) 相同。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 |
| :------: | :------ | :------: | :------ | :------ |
| 2205 | [有资格享受折扣的用户数量 🔒](https://leetcode.com/problems/the-number-of-users-that-are-eligible-for-discount) |  |  [`数据库`](/tag/database.md) | <font color=#15bd66>Easy</font> |
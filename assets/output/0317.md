---
title: 317. 离建筑物最近的距离 🔒
description: LeetCode 317. 离建筑物最近的距离 🔒题解，Shortest Distance from All Buildings，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 317. 离建筑物最近的距离 🔒
  - 离建筑物最近的距离
  - Shortest Distance from All Buildings
  - 解题思路
  - 广度优先搜索
  - 数组
  - 矩阵
---

# 317. 离建筑物最近的距离 🔒

🔴 <font color=#ff334b>Hard</font>&emsp; 🔖&ensp; [`广度优先搜索`](/tag/breadth-first-search.md) [`数组`](/tag/array.md) [`矩阵`](/tag/matrix.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/shortest-distance-from-all-buildings) [`LeetCode`](https://leetcode.com/problems/shortest-distance-from-all-buildings)

## 题目

You are given an `m x n` grid `grid` of values `0`, `1`, or `2`, where:

  * each `0` marks **an empty land** that you can pass by freely,
  * each `1` marks **a building** that you cannot pass through, and
  * each `2` marks **an obstacle** that you cannot pass through.

You want to build a house on an empty land that reaches all buildings in the
**shortest total travel** distance. You can only move up, down, left, and
right.

Return _the**shortest travel distance** for such a house_. If it is not
possible to build such a house according to the above rules, return `-1`.

The **total travel distance** is the sum of the distances between the houses
of the friends and the meeting point.

The distance is calculated using [Manhattan
Distance](http://en.wikipedia.org/wiki/Taxicab_geometry), where `distance(p1,
p2) = |p2.x - p1.x| + |p2.y - p1.y|`.



**Example 1:**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0317.Shortest%20Distance%20from%20All%20Buildings/images/buildings-
grid.jpg)

> Input: grid = [[1,0,2,0,1],[0,0,0,0,0],[0,0,1,0,0]]
> 
> Output: 7
> 
> Explanation: Given three buildings at (0,0), (0,4), (2,2), and an obstacle at (0,2).
> 
> The point (1,2) is an ideal empty land to build a house, as the total travel distance of 3+3+1=7 is minimal.
> 
> So return 7.

**Example 2:**

> Input: grid = [[1,0]]
> 
> Output: 1

**Example 3:**

> Input: grid = [[1]]
> 
> Output: -1

**Constraints:**

  * `m == grid.length`
  * `n == grid[i].length`
  * `1 <= m, n <= 50`
  * `grid[i][j]` is either `0`, `1`, or `2`.
  * There will be **at least one** building in the `grid`.


## 题目大意

给你一个 `m × n` 的网格，值为 `0` 、 `1` 或 `2` ，其中:

  * 每一个 `0` 代表一块你可以自由通过的 **空地**  
  * 每一个 `1` 代表一个你不能通过的 **建筑**
  * 每个 `2` 标记一个你不能通过的 **障碍**  

你想要在一块空地上建造一所房子，在 **最短的总旅行距离** 内到达所有的建筑。你只能上下左右移动。

返回到该房子的 **最短旅行距离** 。如果根据上述规则无法建造这样的房子，则返回 `-1` 。

**总旅行距离  **是朋友们家到聚会地点的距离之和。

使用 **曼哈顿距离**  计算距离，其中距离 `(p1, p2) = |p2.x - p1.x | + | p2.y - p1.y |` 。



**示例   1：**

![](https://fastly.jsdelivr.net/gh/doocs/leetcode@main/solution/0300-0399/0317.Shortest%20Distance%20from%20All%20Buildings/images/buildings-
grid.jpg)

> 
> 
> 
> 
> 
> **输入：** grid = [[1,0,2,0,1],[0,0,0,0,0],[0,0,1,0,0]]
> 
> **输出：** 7 
> 
> **解析：** 给定三个建筑物 (0,0)、(0,4) 和 (2,2) 以及一个位于 (0,2) 的障碍物。
> 
> 由于总距离之和 3+3+1=7 最优，所以位置 (1,2) 是符合要求的最优地点。
> 
> 故返回7。
> 
> 

**示例  2:**

> 
> 
> 
> 
> 
> **输入:** grid = [[1,0]]
> 
> **输出:** 1
> 
> 

**示例 3:**

> 
> 
> 
> 
> 
> **输入:** grid = [[1]]
> 
> **输出:** -1
> 
> 



**提示:**

  * `m == grid.length`
  * `n == grid[i].length`
  * `1 <= m, n <= 50`
  * `grid[i][j]` 是 `0`, `1` 或 `2`
  * `grid` 中 **至少**  有 **一幢** 建筑


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 | 力扣 |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 286 | 墙与门 🔒 |  |  [`广度优先搜索`](/tag/breadth-first-search.md) [`数组`](/tag/array.md) [`矩阵`](/tag/matrix.md) | 🟠 | [🀄️](https://leetcode.cn/problems/walls-and-gates) [🔗](https://leetcode.com/problems/walls-and-gates) |
| 296 | 最佳的碰头地点 🔒 |  |  [`数组`](/tag/array.md) [`数学`](/tag/math.md) [`矩阵`](/tag/matrix.md) `1+` | 🔴 | [🀄️](https://leetcode.cn/problems/best-meeting-point) [🔗](https://leetcode.com/problems/best-meeting-point) |
| 1162 | 地图分析 |  |  [`广度优先搜索`](/tag/breadth-first-search.md) [`数组`](/tag/array.md) [`动态规划`](/tag/dynamic-programming.md) `1+` | 🟠 | [🀄️](https://leetcode.cn/problems/as-far-from-land-as-possible) [🔗](https://leetcode.com/problems/as-far-from-land-as-possible) |
---
title: 1919. 兴趣相同的朋友 🔒
description: LeetCode 1919. 兴趣相同的朋友 🔒题解，Leetcodify Similar Friends，包含解题思路、复杂度分析以及完整的 JavaScript 代码实现。
keywords:
  - LeetCode
  - 1919. 兴趣相同的朋友 🔒
  - 兴趣相同的朋友
  - Leetcodify Similar Friends
  - 解题思路
  - 数据库
---

# 1919. 兴趣相同的朋友 🔒

🔴 <font color=#ff334b>Hard</font>&emsp; 🔖&ensp; [`数据库`](/tag/database.md)&emsp; 🔗&ensp;[`力扣`](https://leetcode.cn/problems/leetcodify-similar-friends) [`LeetCode`](https://leetcode.com/problems/leetcodify-similar-friends)

## 题目

Table: `Listens`

> 
> 
> 
> 
> 
> +-------------+---------+
> 
> | Column Name | Type> 
> |
> 
> +-------------+---------+
> 
> | user_id> 
>  | int> 
>  |
> 
> | song_id> 
>  | int> 
>  |
> 
> | day> 
> > 
>  | date> 
> |
> 
> +-------------+---------+
> 
> This table may contain duplicate rows.
> 
> Each row of this table indicates that the user user_id listened to the song song_id on the day day.
> 
> 



Table: `Friendship`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | user1_id> 
>   | int> 
>  |
> 
> | user2_id> 
>   | int> 
>  |
> 
> +---------------+---------+
> 
> (user1_id, user2_id) is the primary key (combination of columns with unique values) for this table.
> 
> Each row of this table indicates that the users user1_id and user2_id are friends.
> 
> Note that user1_id < user2_id.
> 
> 



Write a solution to report the similar friends of Leetcodify users. A user `x`
and user `y` are similar friends if:

  * Users `x` and `y` are friends, and
  * Users `x` and `y` listened to the same three or more different songs **on the same day**.

Return the result table in **any order**. Note that you must return the
similar pairs of friends the same way they were represented in the input
(i.e., always `user1_id < user2_id`).

The result format is in the following example.



**Example 1:**

> Input: 
> 
> Listens table:
> 
> +---------+---------+------------+
> 
> | user_id | song_id | day> 
> > 
> |
> 
> +---------+---------+------------+
> 
> | 1> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 13> 
>   | 2021-03-15 |
> 
> | 5> 
>    | 10> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 11> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 12> 
>   | 2021-03-16 |
> 
> +---------+---------+------------+
> 
> Friendship table:
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> | 2> 
> > 
> | 4> 
> > 
> |
> 
> | 2> 
> > 
> | 5> 
> > 
> |
> 
> +----------+----------+
> 
> Output: 
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> +----------+----------+
> 
> Explanation: 
> 
> Users 1 and 2 are friends, and they listened to songs 10, 11, and 12 on the same day. They are similar friends.
> 
> Users 1 and 3 listened to songs 10, 11, and 12 on the same day, but they are not friends.
> 
> Users 2 and 4 are friends, but they did not listen to the same three different songs.
> 
> Users 2 and 5 are friends and listened to songs 10, 11, and 12, but they did not listen to them on the same day.
> 
> 


## 题目大意

表: `Listens`

> 
> 
> 
> 
> 
> +-------------+---------+
> 
> | Column Name | Type> 
> |
> 
> +-------------+---------+
> 
> | user_id> 
>  | int> 
>  |
> 
> | song_id> 
>  | int> 
>  |
> 
> | day> 
> > 
>  | date> 
> |
> 
> +-------------+---------+
> 
> 该表没有主键，因此会存在重复的行。
> 
> 该表的每一行所代表的含义是：用户（user_id）在某天（day）听了某首歌曲（song_id）。
> 
> 



表: `Friendship`

> 
> 
> 
> 
> 
> +---------------+---------+
> 
> | Column Name   | Type> 
> |
> 
> +---------------+---------+
> 
> | user1_id> 
>   | int> 
>  |
> 
> | user2_id> 
>   | int> 
>  |
> 
> +---------------+---------+
> 
> (user1_id, user2_id) 是该表的主键。
> 
> 该表的每一行所代表的含义是，用户（user1_id, user2_id）是朋友。
> 
> 注意：user1_id < user2_id。
> 
> 



请写一段SQL查询获取到兴趣相同的朋友。用户 `x` 和 用户 `y` 是兴趣相同的朋友，需满足下述条件：

  * 用户 `x` 和 `y` 是朋友，并且
  * 用户 `x` and `y` 在同一天内听过相同的歌曲，且数量大于等于三首.

结果表 **无需排序  **。注意：返回的结果需要和源数据表的呈现方式相同 （例如， 需满足 `user1_id < user2_id`）。

结果表的格式如下例。



**示例 1：**

> 
> 
> 
> 
> 
> **输入：**
> 
> Listens table:
> 
> +---------+---------+------------+
> 
> | user_id | song_id | day> 
> > 
> |
> 
> +---------+---------+------------+
> 
> | 1> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 1> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 2> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 3> 
>    | 12> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 10> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 11> 
>   | 2021-03-15 |
> 
> | 4> 
>    | 13> 
>   | 2021-03-15 |
> 
> | 5> 
>    | 10> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 11> 
>   | 2021-03-16 |
> 
> | 5> 
>    | 12> 
>   | 2021-03-16 |
> 
> +---------+---------+------------+
> 
> Friendship table:
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> | 2> 
> > 
> | 4> 
> > 
> |
> 
> | 2> 
> > 
> | 5> 
> > 
> |
> 
> +----------+----------+
> 
> **输出：**
> 
> +----------+----------+
> 
> | user1_id | user2_id |
> 
> +----------+----------+
> 
> | 1> 
> > 
> | 2> 
> > 
> |
> 
> +----------+----------+
> 
> **解释：**
> 
> 用户 1 和 2 是朋友, 并且他们在同一天内都听了10、11、12的歌曲。所以，他们是兴趣相同的朋友。
> 
> 用户 1 和 3 在同一天内都听了10、11、12的歌曲，但他们不是朋友。
> 
> 用户 2 和 4 是朋友，但他们同一天内听过相同的歌曲的数量小于3。
> 
> 用户 2 和 5 是朋友，并且在都听了了10、11、12的歌曲，但不在同一天内。


## 解题思路

#### 复杂度分析

- **时间复杂度**：`O()`，
- **空间复杂度**：`O()`，

## 代码

```javascript

```

## 相关题目

<!-- prettier-ignore -->
| 题号 | 标题 | 题解 | 标签 | 难度 | 力扣 |
| :------: | :------ | :------: | :------ | :------: | :------: |
| 1917 | Leetcodify 好友推荐 🔒 |  |  [`数据库`](/tag/database.md) | 🔴 | [🀄️](https://leetcode.cn/problems/leetcodify-friends-recommendations) [🔗](https://leetcode.com/problems/leetcodify-friends-recommendations) |